
(()=>{const e=document,t=["C","D","H","S"],n=["A","J","Q","K"];let r=[],o=[0,0];const a=e.querySelector(".pedir"),d=e.querySelector(".nuevo"),l=e.querySelector(".detener"),s=e.querySelectorAll("span"),c=e.querySelectorAll(".carta-jugador"),i=()=>{r=[];for(let e=2;e<=10;e++)for(let n of t)r.push(e+n);for(let e of n)for(let n of t)r.push(e+n);return _.shuffle(r)},u=()=>{if(0===r.length)throw"no hay cartas";return r.pop()},f=(e,t)=>(o[t]+=(e=>{const t=e.slice(0,-1);return isNaN(t)?"A"==t?11:10:1*t})(e),s[t].textContent=o[t],o[t]),g=(t,n)=>{const r=e.createElement("img");r.src=`assets/img/${t}.png`,c[n].appendChild(r)},h=t=>{let n=0;do{const e=u();n=f(e,o.length-1),g(e,o.length-1)}while(t>n&&t<=21);setTimeout(()=>{const t=e.createElement("div");t.textContent=`${(()=>{const[e,t]=o;let n;return e>21?n="computadora gana":e===t?n="empate":t>21?n="jugador gana":e<t&&(n="computadora gana"),n})()}`,t.classList.add("ganador"),e.body.insertAdjacentElement("afterbegin",t),d.disabled=!0,setTimeout(()=>{e.body.removeChild(t),d.disabled=!1},1500)},500),a.disabled=!0,l.disabled=!0};a.addEventListener("click",()=>{const e=u(),t=f(e,0);g(e,0),t>21?h(t):21===t&&h(t)}),l.addEventListener("click",()=>{h(o[0])}),d.addEventListener("click",()=>{r=i(),o=[0,0],s.forEach(e=>e.textContent="0"),c.forEach(e=>e.innerHTML=""),a.disabled=!1,l.disabled=!1,d.disabled=!0})})();